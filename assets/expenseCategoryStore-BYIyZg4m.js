import{B as f,r as p,u as h,b as c,C as g}from"./index-C6ml-qKZ.js";const $=f("expense_category",()=>{const n=p({}),y=p(null),l=p(!1),a=p({}),x=h();return{expense_categories:n,currentExpenseCategory:y,isLoading:l,errorMessage:a,fetchExpenseCategories:async(t=1)=>{var s,r;x.isAuthenticated;try{l.value=!0;const e=await c.get(`/api/expense-categories?page=${t}`);n.value=e.data}catch(e){a.value=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to fetch expense categories"}finally{l.value=!1}},createExpenseCategory:async t=>{var s,r,e;try{l.value=!0,a.value={};const o=await c.post("/api/expense-categories",t);return n.value.push(o.data.expense_category),o.data}catch(o){return o instanceof g&&((s=o.response)==null?void 0:s.status)===422?a.value=o.response.data.errors:a.value={general:[((e=(r=o.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to create expense category"]},null}finally{l.value=!1}},updateExpenseCategory:async(t,s)=>{var r,e,o,i;try{l.value=!0,a.value={};const u=await c.put(`/api/expense-categories/${t}`,categoryData),d=(r=n.value.data)==null?void 0:r.findIndex(v=>v.id===t);return d!==-1&&n.value.data&&(n.value.data[d]=u.data.data),u.data}catch(u){return u instanceof g&&((e=u.response)==null?void 0:e.status)===422?a.value=u.response.data.errors:a.value={general:[((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to update expense category"]},null}finally{l.value=!1}},fetchExpenseCategoryById:async t=>{try{return(await c.get(`/api/expense_categories/${t}`)).data}catch{return a.value="Failed to fetch expense category",null}},deleteExpenseCategory:async t=>{var s,r;try{return l.value=!0,a.value=null,await c.delete(`/api/expense-categories/${t}`),n.value.data=n.value.data.filter(e=>e.id!=t),n.value.total-=1,n.value.to-=1,!0}catch(e){throw a.value=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to delete expense category",e}finally{l.value=!1}}}});export{$ as u};
