const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Calculator-eZXxlLLm.js","assets/index-C6ml-qKZ.js","assets/index-o8QV2mgI.css","assets/PaymentMethod-kd4pnUr0.js","assets/sweetalert2.esm.all-BQIkj5Wb.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/PaymentMethod-C4LaYOxr.css","assets/ThermalInvoice-D9iGjURE.js"])))=>i.map(i=>d[i]);
import{r as u,E as I,o as pt,I as mt,g as r,f as t,h as g,c as Oe,m as f,v as b,F as R,i as A,n as ee,z as Q,t as v,x as gt,j as te,J as ye,A as ft,K as ht,D as bt,b as T,q as yt,_ as xe,e as a,l as we}from"./index-C6ml-qKZ.js";import{S as V}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as xt}from"./_plugin-vue_export-helper-DlAUqK2U.js";class wt{constructor(){this.recognition=null,this.isListening=!1,this.onResultCallback=null,this.onErrorCallback=null,this.isSupported=this.checkSupport(),this.silenceTimer=null,this.lastResult="",this.isSupported&&this.initSpeechRecognition()}checkSupport(){return"webkitSpeechRecognition"in window||"SpeechRecognition"in window}initSpeechRecognition(){try{const h=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new h,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.maxAlternatives=3,this.recognition.continuous=!0,this.recognition.continuous!==void 0&&(this.recognition.continuous=!0),this.recognition.interimResults!==void 0&&(this.recognition.interimResults=!0),this.recognition.onresult=y=>{clearTimeout(this.silenceTimer);let L="",M="";for(let P=y.resultIndex;P<y.results.length;P++){const p=y.results[P][0].transcript;y.results[P].isFinal?M+=p:L+=p}this.silenceTimer=setTimeout(()=>{L&&this.onResultCallback&&this.onResultCallback(L.trim(),!0)},1500),this.onResultCallback&&(M?(this.lastResult=M.trim(),this.onResultCallback(this.lastResult,!0)):L&&this.onResultCallback(L.trim(),!1))},this.recognition.onerror=y=>{console.error("Speech recognition error:",y.error),clearTimeout(this.silenceTimer),this.onErrorCallback&&this.onErrorCallback(y.error),this.isListening&&["aborted","network"].includes(y.error)&&setTimeout(()=>{this.isListening&&this.start()},500)},this.recognition.onend=()=>{clearTimeout(this.silenceTimer),this.isListening&&setTimeout(()=>{this.isListening&&this.start()},100)},this.recognition.onstart=()=>{console.log("Speech recognition started"),clearTimeout(this.silenceTimer)}}catch(h){console.error("Failed to initialize speech recognition:",h),this.isSupported=!1}}start(){if(this.isSupported&&this.recognition&&!this.isListening)try{return this.recognition.start(),this.isListening=!0,this.lastResult="",!0}catch(h){return console.error("Error starting speech recognition:",h),setTimeout(()=>{if(this.isListening&&this.recognition)try{this.recognition.start()}catch(y){console.error("Retry failed:",y)}},300),!1}return!1}stop(){if(this.isSupported&&this.recognition&&this.isListening)try{return clearTimeout(this.silenceTimer),this.recognition.stop(),this.isListening=!1,!0}catch(h){return console.error("Error stopping speech recognition:",h),!1}return!1}onResult(h){this.onResultCallback=h}onError(h){this.onErrorCallback=h}getStatus(){return{isSupported:this.isSupported,isListening:this.isListening}}setLanguage(h){this.recognition&&(this.recognition.lang=h)}getAvailableLanguages(){return["en-US","en-GB","en-AU","en-CA","en-IN","es-ES","fr-FR","de-DE","it-IT","pt-BR"]}}const U=new wt,kt={class:"min-h-screen bg-gray-100"},Ct={class:"container mx-auto px-4 py-8"},_t={class:"flex flex-col md:flex-row gap-4"},St={class:"md:w-[60%] bg-white rounded-lg shadow p-4"},qt={class:"flex justify-between items-center mb-4"},Dt={class:"flex space-x-2"},Tt={class:"mb-4"},Vt={class:"mb-6 relative"},Mt=["onClick"],jt={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3"},Rt=["onClick"],At={class:"h-16 bg-teal-100 flex items-center justify-center overflow-hidden transition-all duration-300 ease-in-out group-hover:h-24"},Pt=["src","alt"],$t={key:1,class:"text-teal-400"},Lt={class:"p-2 text-center"},Et={class:"product-name font-semibold text-teal-800 truncate"},Bt={class:"product-price text-teal-800 font-semibold"},Ot={key:0,class:"stock-warning text-red-500"},It={class:"md:w-[40%] bg-white rounded-lg shadow p-4 sticky top-4 h-fit"},Ut={class:"mb-4"},zt=["value"],Nt={key:0,class:"text-teal-500 text-center py-8"},Ft={key:1,class:"space-y-4"},Ht={class:"mb-4"},Zt=["value"],Kt={class:"grid grid-cols-[1fr_auto]"},Qt={key:0,class:"text-red-600 text-sm mt-1"},Gt={key:0,class:"mb-4"},Jt={class:"ml-1"},Yt={class:"flex items-center"},Wt={class:"text-green-600 mr-2"},Xt=["onClick"],eo={key:0,class:"flex justify-between items-center"},to={class:"ml-1"},oo={class:"flex items-center"},so={class:"text-green-600 mr-2"},lo={class:"border-b border-teal-200 pb-2 mb-4"},no={class:"h-12 w-12 cart-item-image bg-teal-100 rounded-md overflow-hidden mr-3 flex-shrink-0"},ao=["src","alt"],ro={key:1,class:"text-teal-400 h-full flex items-center justify-center"},io={class:"flex-1"},uo={class:"tablet-text-sm font-medium text-teal-800"},co={class:"flex items-center justify-between mt-1"},vo={class:"flex items-center"},po=["onClick"],mo={class:"mx-2 w-6 text-center"},go=["onClick"],fo=["onClick"],ho={class:"font-medium text-teal-800"},bo={class:"space-y-2 mb-6"},yo={class:"flex justify-between"},xo={key:0,class:"flex justify-between text-green-600"},wo={key:1,class:"flex justify-between text-green-600"},ko={class:"flex justify-between font-bold text-lg border-t border-gray-200 pt-2 mt-2"},Co={class:"space-y-3"},_o={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},So={class:"bg-white rounded-lg p-6 w-full max-w-md"},qo={class:"space-y-4"},Do={class:"flex justify-end space-x-2 mt-4"},To={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Vo={class:"bg-white rounded-lg p-6 w-full max-w-md"},Mo={class:"space-y-4"},jo={key:0,class:"text-xs text-gray-500 mt-1"},Ro={key:0},Ao=["value"],Po={class:"grid grid-cols-2 gap-4"},$o={class:"flex items-center"},Lo={class:"flex justify-end space-x-2 mt-4"},Eo={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Bo={class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto"},Oo={class:"flex justify-between items-center mb-4"},Io={key:0,class:"text-center py-8 text-gray-500"},Uo={key:1,class:"space-y-4"},zo={class:"flex justify-between items-start"},No={class:"font-semibold"},Fo={class:"text-sm text-gray-600"},Ho={class:"text-sm text-gray-600"},Zo={class:"text-sm text-gray-600"},Ko={class:"flex space-x-2"},Qo=["onClick"],Go=["onClick"],Jo={key:6,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Yo={class:"bg-white rounded-lg p-6 w-full max-w-md"},Wo={class:"flex justify-between items-center mb-4"},Xo={class:"space-y-4"},es=["value"],ts=["value"],os=["max"],ss={class:"flex justify-end space-x-2 mt-6"},ls={key:7,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ns={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},as={class:"flex justify-between items-center mb-4"},rs={class:"mb-4"},is={class:"relative"},us={key:0,class:"text-center py-8 text-gray-500"},ds={key:0},cs={key:1},vs={key:1,class:"max-h-[60vh] overflow-y-auto"},ps=["onClick"],ms={class:"flex justify-between items-center"},gs={class:"font-semibold"},fs={class:"text-sm text-gray-600"},hs={class:"fixed bottom-20 right-4 z-50 flex flex-col items-end space-y-2"},bs={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-red-400 rounded-full animate-ping"},ys={key:8,class:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-teal-800 text-white px-6 py-3 rounded-lg shadow-lg transition-all duration-300 max-w-md text-center"},xs={class:"flex items-center justify-center space-x-2"},ws={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ks={class:"font-semibold"},Cs={key:9,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},_s={class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Ss={class:"flex justify-between items-center mb-4"},qs={class:"mt-6 flex justify-center space-x-4"},Ds={__name:"POS",setup(Ie){const h=ye(()=>xe(()=>import("./Calculator-eZXxlLLm.js"),__vite__mapDeps([0,1,2]))),y=ye(()=>xe(()=>import("./PaymentMethod-kd4pnUr0.js"),__vite__mapDeps([3,1,2,4,5,6]))),L=ye(()=>xe(()=>import("./ThermalInvoice-D9iGjURE.js"),__vite__mapDeps([7,1,2]))),M=u([]),P=u([]),p=u([]),E=u(""),B=u(null),q=u(""),G=u(null),k=u(null),de=u(null),C=u({}),_=u(null),ke="https://api.realpayglobal.co.uk",Ue=yt(),oe=u(!1),Ce=u(!1),z=u(!1),J=u(null),ze=u({name:"RPG-POS",address:"123 Business St, City",phone:"0800-123-4567",footer:"Thank you for your business!"}),se=u(!1),d=u({name:"",code:"",type:"percentage",value:0,scope:"product",product_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],is_active:!0}),j=u([]),le=u(!1),Y=u(!1),N=u(null),F=u(0),ne=u(""),ce=u("cash"),ve=u(!1),W=u(""),pe=u([]),Ne=()=>{if(p.value.length===0){alert("Cannot save an empty cart as draft");return}const s={id:Date.now(),customer:$.value,items:p.value.map(e=>({product:e.product,quantity:e.quantity})),discounts:{productDiscounts:{...C.value},generalDiscount:_},subtotal:O.value,totalDiscount:ot.value,total:re.value,createdAt:new Date().toISOString()};j.value.push(s),localStorage.setItem("posDrafts",JSON.stringify(j.value)),V.fire({title:"Saved!",text:"Order saved as draft",icon:"success",confirmButtonText:"OK"}),X()},Fe=s=>{X(),$.value=s.customer,s.items.forEach(e=>{const n=M.value.find(i=>i.id===e.product.id);n&&p.value.push({product:n,quantity:e.quantity,originalQuantity:n.quantity})}),C.value={...s.discounts.productDiscounts},_.value=s.discounts.generalDiscount,le.value=!1},He=s=>{j.value=j.value.filter(e=>e.id!==s),localStorage.setItem("posDrafts",JSON.stringify(j.value))},Ze=s=>{N.value=s,F.value=s.total_amount,Y.value=!0},_e=async()=>{try{const s=await T.post("/api/pos-orders/search",{params:{query:W.value}});pe.value=s.data}catch(s){console.error("Error searching orders:",s),V.fire({title:"Error",text:"Failed to search orders",icon:"error"})}},Ke=async()=>{var s,e;try{(await T.post("/api/pos-orders/refund",{order_id:N.value.id,amount:F.value,reason:ne.value,payment_method:ce.value})).data.success&&(V.fire({title:"Refund Processed!",text:`Refund of ${x(F.value)} completed`,icon:"success",confirmButtonText:"OK"}),N.value=null,F.value=0,ne.value="",Y.value=!1)}catch(n){console.error("Refund error:",n),V.fire({title:"Refund Failed",text:((e=(s=n.response)==null?void 0:s.data)==null?void 0:e.message)||"Error processing refund",icon:"error",confirmButtonText:"OK"})}},Qe=()=>{d.value.code||(d.value.code="DISC-"+Math.random().toString(36).substring(2,8).toUpperCase()),p.value.length>0&&(d.value.product_id=p.value[0].product.id),se.value=!0},Ge=()=>{oe.value=!oe.value},Je=()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),Ce.value=!1):(document.documentElement.requestFullscreen().catch(s=>{console.error(`Error attempting to enable full screen: ${s.message}`)}),Ce.value=!0)},Ye=async()=>{var s,e;try{if(!d.value.name||!d.value.code||!d.value.value)throw new Error("Please fill all required fields");if(d.value.scope==="product"&&!d.value.product_id)throw new Error("Please select a product for product discount");const n={...d.value,value:parseFloat(d.value.value),product_ids:d.value.scope==="product"?[d.value.product_id]:[],apply_to_all_products:d.value.scope==="general"},i=await T.post("/api/pos-discounts",n);if(i.data.success){const l=i.data.discount;l.calculateDiscount=o=>l.type==="fixed"?Math.min(l.value,o):o*(l.value/100),l.scope==="product"?C.value[d.value.product_id]=l:_.value=l,d.value={name:"",code:"",type:"percentage",value:0,scope:"product",product_id:p.value.length>0?p.value[0].product.id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],is_active:!0},se.value=!1,V.fire({title:"Success!",text:"Discount saved and applied successfully",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#1e40af"})}}catch(n){console.error("Error applying new discount:",n),V.fire({title:"Error!",text:((e=(s=n.response)==null?void 0:s.data)==null?void 0:e.message)||n.message||"Error applying discount",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#dc2626"})}},H=u([]),$=u(null),ae=u(!1),D=u({name:"",phone:"",email:"",address:""}),me=async()=>{try{const s=await T.get("/api/customers");H.value=s.data.data;const e=H.value.find(n=>n.id===1);$.value=e||(H.value.length>0?H.value[0]:null)}catch(s){console.error("Error fetching customers:",s)}},We=async()=>{try{const s=await T.post("/api/customers",D.value);H.value.push(s.data),$.value=s.data,ae.value=!1,D.value={name:"",phone:"",email:"",address:""},await me()}catch(s){console.error("Error adding customer:",s)}},Xe=()=>{ae.value=!0},et=s=>{E.value=s},tt=I(()=>{let s=M.value;if(E.value){const e=E.value.toLowerCase();s=s.filter(n=>{var i;return n.name.toLowerCase().includes(e)||((i=n.barcode)==null?void 0:i.toLowerCase().includes(e))})}return B.value&&(s=s.filter(e=>e.category_id===B.value)),s}),O=I(()=>p.value.reduce((s,e)=>s+e.product.price*e.quantity,0)),Z=I(()=>p.value.reduce((s,e)=>{const n=C.value[e.product.id];return n?s+n.calculateDiscount(e.product.price*e.quantity):s},0)),K=I(()=>{if(!_.value)return 0;const s=O.value-Z.value;return _.value.calculateDiscount(s)});I(()=>G.value?G.value.calculateDiscount(O.value):0);const ot=I(()=>Z.value+K.value),re=I(()=>O.value-Z.value-K.value),Se=async()=>{try{const s=await T.get("/api/pos-products");M.value=s.data}catch(s){console.error("Error fetching products:",s)}},qe=async()=>{try{const s=await T.get("/api/pos-categories");P.value=s.data}catch(s){console.error("Error fetching categories:",s)}},ie=s=>{const e=p.value.find(n=>n.product.id===s.id);e?e.quantity<s.quantity?e.quantity++:alert(`Only ${s.quantity} available in stock`):s.quantity>0?p.value.push({product:s,quantity:1,originalQuantity:s.quantity}):alert("This product is out of stock")},De=s=>{const e=p.value[s];e.quantity<e.product.quantity?e.quantity++:alert(`Only ${e.product.quantity} available in stock`)},Te=s=>{const e=p.value[s];e.quantity>1?e.quantity--:ge(s)},ge=s=>{p.value.splice(s,1),p.value.length===0&&(G.value=null)},X=()=>{p.value=[],G.value=null,k.value=null},Ve=s=>{B.value=s},Me=()=>{B.value=null},fe=async()=>{var s,e,n;if(k.value=null,G.value=null,!q.value){k.value="Please enter a discount code";return}try{let i=await T.get("/api/pos-discounts/validate",{params:{code:q.value,amount:O.value,quantity:p.value.reduce((l,o)=>l+o.quantity,0)}});if(i.data.valid){const l=i.data.discount;if(l.calculateDiscount=o=>l.type==="fixed"?Math.min(l.value,o):l.type==="percentage"?o*(l.value/100):0,i.data.scope==="product"){if(!((s=i.data.applicable_to)!=null&&s.product_id)){k.value="This discount requires selecting a specific product";return}C.value[i.data.applicable_to.product_id]=l}else _.value=l;q.value="",k.value=null}else{for(const l of p.value)if(i=await T.get("/api/pos-discounts/validate",{params:{code:q.value,product_id:l.product.id,amount:l.product.price*l.quantity,quantity:l.quantity}}),i.data.valid&&i.data.scope==="product"){const o=i.data.discount;o.calculateDiscount=c=>o.type==="fixed"?Math.min(o.value,c):o.type==="percentage"?c*(o.value/100):0,C.value[l.product.id]=o,q.value="",k.value=null;return}k.value=i.data.message||"Discount is not applicable to any products"}}catch(i){k.value=((n=(e=i.response)==null?void 0:e.data)==null?void 0:n.message)||"Error applying discount",console.error("Error applying discount:",i)}},st=s=>{const e=p.value.find(n=>n.product.id===s);return e?e.product.name:""},lt=s=>{const e=p.value.find(n=>n.product.id===s);return e?e.product.price*e.quantity:0},nt=s=>{delete C.value[s]},at=()=>{_.value=null},rt=s=>{je(s)},je=async s=>{var e,n,i;if(p.value.length===0){alert("Your cart is empty");return}if(!$.value){alert("Please select a customer before completing the order");return}try{const l={customer_id:((e=$.value)==null?void 0:e.id)||1,payment_method:s.method,amount_tendered:s.amountTendered,change_due:s.changeDue,items:p.value.map(c=>{var S;return{product_id:c.product.id,quantity:c.quantity,price:c.product.price,discount_id:((S=C.value[c.product.id])==null?void 0:S.id)||null}}),subtotal:O.value,product_discounts:Z.value||0,general_discount:K.value||0,total_amount:re.value};console.log(l);const o=await T.post("/api/pos-orders",l);o.data.success?(J.value=o.data.order,z.value=!0,await V.fire({title:"Success!",text:"Order completed successfully!",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#1e40af",timer:3e3,timerProgressBar:!0,didClose:()=>{it()}})):await V.fire({title:"Error!",text:o.data.message||"Error completing order",icon:"error",confirmButtonText:"Try Again",confirmButtonColor:"#dc2626"})}catch(l){console.error("Error completing order:",l),l.response&&(console.error("Response data:",l.response.data),console.error("Response status:",l.response.status)),alert(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Error completing order. Please try again.")}},it=()=>{p.value=[],C.value={},_.value=null,q.value="",k.value=null,E.value="",B.value=null,Se(),qe(),me()},x=s=>`â‚¦${new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}`,Re=s=>{de.value&&de.value.scrollBy({left:s*200,behavior:"smooth"})},ut=()=>{Ue.push("/")},w=u(!1),Ae=u(""),he=u(!1),ue=u(!1),Pe=s=>{const e=s.toLowerCase();return M.value.find(n=>n.name.toLowerCase().includes(e))},$e=s=>{const e=s.toLowerCase();return p.value.find(n=>n.product.name.toLowerCase().includes(e))},dt=s=>{if(console.log("Voice command received:",s),!s||s.trim().length<2)return;const e=s.toLowerCase().trim(),n={search:l=>{E.value=l,m(`Searching for ${l}`)},add:l=>{const o=Pe(l);if(o)ie(o),m(`Added ${o.name} to cart`);else{const c=ct(l);c?(ie(c),m(`Added ${c.name} to cart`)):m(`Product "${l}" not found. Try saying the exact name.`)}},increase:l=>be(l,"increase"),decrease:l=>be(l,"decrease"),reduce:l=>be(l,"decrease"),remove:l=>{const o=$e(l);if(o){const c=p.value.findIndex(S=>S.product.id===o.product.id);ge(c),m(`Removed ${o.product.name} from cart`)}else m(`"${l}" not found in cart`)},"apply discount":l=>{q.value=l,fe(),m(`Applying discount code ${l}`)},discount:l=>{q.value=l,fe(),m(`Applying discount ${l}`)},payment:()=>{m("Opening payment options"),nextTick(()=>{const l=document.querySelector('[class*="payment"]');l&&l.click()})},pay:()=>{m("Processing payment"),nextTick(()=>{const l=document.querySelector('[class*="payment"]');l&&l.click()})},cash:()=>m("Cash payment selected"),card:()=>m("Card payment selected"),receipt:()=>{J.value?(m("Printing receipt"),nextTick(()=>{z.value&&$refs.thermalInvoice&&$refs.thermalInvoice.printInvoice()})):m("No order to print receipt for")},print:()=>{J.value&&(m("Printing receipt"),nextTick(()=>{z.value&&$refs.thermalInvoice&&$refs.thermalInvoice.printInvoice()}))},"clear cart":()=>{X(),m("Cart cleared")},"empty cart":()=>{X(),m("Cart emptied")},category:l=>{const o=vt(l);o?(Ve(o.id),m(`Showing ${o.name} category`)):m(`Category "${l}" not found`)},"show all":()=>{Me(),m("Showing all products")},help:()=>Ee(),stop:()=>{U.stop(),w.value=!1,m("Voice commands stopped")}};let i=!1;for(const[l,o]of Object.entries(n))if(e.startsWith(l+" ")||e===l){const c=e.replace(l,"").trim();o(c),i=!0;break}if(!i){const l=Pe(e);l&&(ie(l),m(`Added ${l.name} to cart`),i=!0)}i||m(`Command not recognized: "${s}". Say "help" for available commands.`)},ct=s=>{const e=s.toLowerCase(),n=M.value;let i=n.find(l=>l.name.toLowerCase()===e);return i||(i=n.find(l=>l.name.toLowerCase().includes(e)),i)||(i=n.find(l=>e.split(" ").some(c=>l.name.toLowerCase().includes(c)))),i},vt=s=>{const e=s.toLowerCase();return P.value.find(n=>n.name.toLowerCase().includes(e))},be=(s,e)=>{const n=$e(s);if(n){const i=p.value.findIndex(l=>l.product.id===n.product.id);e==="increase"?(De(i),m(`Increased quantity of ${n.product.name}`)):(Te(i),m(`Decreased quantity of ${n.product.name}`))}else m(`"${s}" not found in cart`)},Le=async()=>{if(!U.getStatus().isSupported){V.fire({title:"Voice Not Supported",text:"Speech recognition is not supported in your browser. Please use Chrome or Edge for best results.",icon:"warning",confirmButtonText:"OK"});return}if(w.value)U.stop(),w.value=!1,m("Voice commands deactivated");else try{await navigator.mediaDevices.getUserMedia({audio:!0}),U.start()?(w.value=!0,m('ðŸŽ¤ Listening... Say "add [product]", "search [item]", or "help" for more commands',5e3)):m("Failed to start voice recognition. Please refresh and try again.")}catch(e){console.error("Microphone access denied:",e),V.fire({title:"Microphone Access Required",text:"Please allow microphone access to use voice commands. Click the microphone icon in your address bar.",icon:"warning",confirmButtonText:"OK"})}},Ee=()=>{ue.value=!0},Be=s=>{try{const e=new(window.AudioContext||window.webkitAudioContext),n=e.createOscillator(),i=e.createGain();switch(n.connect(i),i.connect(e.destination),s){case"start":n.frequency.setValueAtTime(800,e.currentTime);break;case"success":n.frequency.setValueAtTime(600,e.currentTime);break;case"error":n.frequency.setValueAtTime(300,e.currentTime);break}i.gain.setValueAtTime(.1,e.currentTime),i.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),n.start(e.currentTime),n.stop(e.currentTime+.3)}catch{console.log("Audio feedback not supported")}},m=(s,e=3e3)=>{Ae.value=s,he.value=!0,!s.includes("not found")&&!s.includes("error")?Be("success"):Be("error"),setTimeout(()=>{he.value=!1},e)};return pt(()=>{const s=localStorage.getItem("posDrafts");s&&(j.value=JSON.parse(s)),U.onResult((e,n)=>{n&&e.trim()&&dt(e)}),U.onError(e=>{console.error("Voice recognition error:",e),e==="not-allowed"?(m("Microphone access denied. Please allow microphone permissions."),w.value=!1):m(e==="network"?"Network error in voice recognition":`Voice error: ${e}`)}),Se(),qe(),me()}),mt(()=>{U.stop()}),(s,e)=>{var n,i,l;return a(),r("div",kt,[t("div",Ct,[e[56]||(e[56]=t("h1",{class:"text-3xl text-teal-800 font-bold text-center mb-8"}," Point of Sale System ",-1)),t("div",_t,[t("div",St,[t("div",qt,[t("div",{class:"flex space-x-2"},[t("button",{onClick:Ge,class:"p-2 bg-teal-800 text-white rounded-lg hover:bg-teal-700 transition"},e[36]||(e[36]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"})],-1)])),t("button",{onClick:Je,class:"p-2 bg-teal-800 text-white rounded-lg hover:bg-teal-700 transition"},e[37]||(e[37]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})],-1)]))]),t("div",Dt,[j.value.length!=0?(a(),r("button",{key:0,onClick:e[0]||(e[0]=o=>le.value=!0),class:"w-32 p-2 bg-blue-500 text-xs text-white py-3 rounded-lg font-bold hover:bg-black transition"}," Load Draft Orders ")):g("",!0),t("button",{onClick:e[1]||(e[1]=o=>ve.value=!0),class:"w-32 bg-orange-600 text-xs text-white p-2 rounded-lg font-semibold hover:bg-red-700 transition"}," Process Refund "),t("button",{onClick:ut,type:"button",class:"p-2 bg-teal-800 text-white rounded-lg hover:bg-teal-700 transition"},e[38]||(e[38]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1)]))])]),t("div",Tt,[f(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>E.value=o),type:"text",placeholder:"Search products...",class:"w-full p-3 border border-teal-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500"},null,512),[[b,E.value]])]),t("div",Vt,[t("button",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 z-10 bg-white text-teal-800 border border-teal-800 rounded-full w-8 h-8 flex items-center justify-center shadow-md hover:bg-teal-600 transition",onClick:e[3]||(e[3]=o=>Re(-1))}," â† "),t("button",{class:"absolute right-0 top-1/2 transform -translate-y-1/2 z-10 bg-white text-teal-800 border border-teal-800 rounded-full w-8 h-8 flex items-center justify-center shadow-md hover:bg-teal-600 transition",onClick:e[4]||(e[4]=o=>Re(1))}," â†’ "),t("div",{ref_key:"categoriesContainer",ref:de,class:"flex rounded-md p-2 space-x-2 p-2 overflow-x-auto pb-2 mt-5 mb-5 border border-teal-800 shadow-lg scrollbar-hide"},[(a(!0),r(R,null,A(P.value,o=>(a(),r("button",{key:o.id,onClick:c=>Ve(o.id),class:ee([{"bg-teal-800 text-white":B.value===o.id},"category-btn px-3 py-1 rounded-full text-white text-semibold bg-teal-700 hover:bg-teal-300 transition whitespace-nowrap"])},v(o.name),11,Mt))),128)),t("button",{onClick:Me,class:ee([{"bg-teal-800 text-white":B.value===null},"px-4 py-2 rounded-full text-white text-sm text-semibold bg-teal-700 hover:bg-teal-300 transition whitespace-nowrap"])}," All ",2)],512)]),t("div",jt,[(a(!0),r(R,null,A(tt.value,o=>(a(),r("div",{key:o.id,onClick:c=>ie(o),class:"bg-white border border-teal-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition cursor-pointer group"},[t("div",At,[o.image?(a(),r("img",{key:0,src:o.image?`${te(ke)}/storage/${o.image}`:"/images/default-food.png",alt:o.name,class:"object-cover h-full w-full transition-all duration-300 ease-in-out group-hover:scale-105"},null,8,Pt)):(a(),r("div",$t,e[39]||(e[39]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),t("div",Lt,[t("h3",Et,v(o.name),1),t("p",Bt,v(x(o.price)),1),o.quantity<=5?(a(),r("p",Ot," Only "+v(o.quantity)+" left ",1)):g("",!0)])],8,Rt))),128))])]),t("div",It,[t("div",Ut,[t("div",{class:"flex justify-between items-center mb-2"},[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-teal-700"},"Customer",-1)),t("button",{onClick:Xe,class:"text-sm text-teal-600 hover:text-teal-800"}," + Add New Customer ")]),f(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>$.value=o),class:"w-full p-2 border border-teal-300 rounded-lg"},[(a(!0),r(R,null,A(H.value,o=>(a(),r("option",{key:o.id,value:o},v(o.name)+" ("+v(o.phone)+") ",9,zt))),128))],512),[[Q,$.value]])]),e[55]||(e[55]=t("h2",{class:"text-xl font-bold mb-4"},"Current Order",-1)),p.value.length===0?(a(),r("div",Nt,e[41]||(e[41]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})],-1),t("p",null,"Your cart is empty",-1),t("p",{class:"text-sm"},"Select products to add to your order",-1)]))):(a(),r("div",Ft,[t("div",Ht,[t("div",{class:"flex justify-between items-center mb-2"},[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-teal-700"},"Discount",-1)),t("button",{onClick:Qe,class:"text-sm text-teal-600 hover:text-teal-800"}," + Add New Discount ")]),f(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.selectedProductForDiscount=o),class:"w-full mb-2 p-2 border border-teal-300 rounded-lg"},[e[43]||(e[43]=t("option",{value:null},"Apply to entire order",-1)),(a(!0),r(R,null,A(p.value,o=>(a(),r("option",{key:o.product.id,value:o.product.id}," Apply to "+v(o.product.name)+" only ",9,Zt))),128))],512),[[Q,s.selectedProductForDiscount]]),t("div",Kt,[f(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>q.value=o),type:"text",placeholder:"Enter discount code",class:"w-full p-2 border border-teal-300 rounded-l-lg focus:outline-none focus:ring-1 focus:ring-teal-500"},null,512),[[b,q.value]]),t("button",{onClick:fe,class:"bg-teal-800 text-white px-4 py-2 rounded-r-lg hover:bg-teal-700 transition"}," Apply ")]),k.value?(a(),r("p",Qt,v(k.value),1)):g("",!0)]),Object.keys(C.value).length>0||_.value?(a(),r("div",Gt,[e[48]||(e[48]=t("h3",{class:"text-sm font-medium text-teal-700 mb-2"},"Applied Discounts",-1)),(a(!0),r(R,null,A(C.value,(o,c)=>(a(),r("div",{key:c,class:"flex justify-between items-center mb-1"},[t("div",null,[e[44]||(e[44]=t("span",{class:"text-green-600"},"Product Discount:",-1)),t("span",Jt,v(st(c))+" - "+v(o.name),1)]),t("div",Yt,[t("span",Wt,"-"+v(x(o.calculateDiscount(lt(c)))),1),t("button",{onClick:S=>nt(c),class:"text-red-500 hover:text-red-700"},e[45]||(e[45]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Xt)])]))),128)),_.value?(a(),r("div",eo,[t("div",null,[e[46]||(e[46]=t("span",{class:"text-green-600"},"Order Discount:",-1)),t("span",to,v(_.value.name),1)]),t("div",oo,[t("span",so,"-"+v(x(K.value)),1),t("button",{onClick:at,class:"text-red-500 hover:text-red-700"},e[47]||(e[47]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])):g("",!0)])):g("",!0),t("div",lo,[(a(!0),r(R,null,A(p.value,(o,c)=>(a(),r("div",{key:c,class:"cart-item flex items-center py-2 border-b border-teal-100"},[t("div",no,[o.product.image?(a(),r("img",{key:0,src:`${te(ke)}/storage/${o.product.image}`,alt:o.product.name,class:"object-cover h-full w-full"},null,8,ao)):(a(),r("div",ro,e[49]||(e[49]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),t("div",io,[t("h3",uo,v(o.product.name),1),t("div",co,[t("div",vo,[t("button",{onClick:we(S=>Te(c),["stop"]),class:"w-6 h-6 flex items-center justify-center bg-teal-200 rounded hover:bg-teal-300"}," - ",8,po),t("span",mo,v(o.quantity),1),t("button",{onClick:we(S=>De(c),["stop"]),class:"w-6 h-6 flex items-center justify-center bg-teal-200 rounded hover:bg-teal-300"}," + ",8,go),t("button",{onClick:we(S=>ge(c),["stop"]),class:"ml-2 text-red-500 hover:text-red-700"},e[50]||(e[50]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,fo)]),t("span",ho,v(x(o.product.price*o.quantity)),1)])])]))),128)),t("div",bo,[t("div",yo,[e[51]||(e[51]=t("span",null,"Subtotal:",-1)),t("span",null,v(x(O.value)),1)]),Z.value>0?(a(),r("div",xo,[e[52]||(e[52]=t("span",null,"Product Discounts:",-1)),t("span",null,"-"+v(x(Z.value)),1)])):g("",!0),K.value>0?(a(),r("div",wo,[e[53]||(e[53]=t("span",null,"Order Discount:",-1)),t("span",null,"-"+v(x(K.value)),1)])):g("",!0),t("div",ko,[e[54]||(e[54]=t("span",null,"Total:",-1)),t("span",null,v(x(re.value)),1)])]),t("div",Co,[gt(te(y),{"total-amount":re.value,onPaymentCompleted:rt},null,8,["total-amount"]),t("button",{onClick:je,class:"w-full tablet-btn bg-teal-800 text-white py-3 rounded-lg font-bold hover:bg-teal-700 transition"}," Complete Order "),t("button",{onClick:Ne,class:"w-full bg-yellow-500 text-white py-3 rounded-lg font-bold hover:bg-yellow-600 transition"}," Save as Draft "),t("button",{onClick:X,class:"w-full bg-gray-200 text-gray-800 py-3 rounded-lg font-bold hover:bg-gray-300 transition"}," Clear Cart ")])])]))])])]),ae.value?(a(),r("div",_o,[t("div",So,[e[61]||(e[61]=t("h3",{class:"text-lg font-bold mb-4 text-teal-600"},"Add New Customer",-1)),t("div",qo,[t("div",null,[e[57]||(e[57]=t("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),f(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>D.value.name=o),type:"text",class:"w-full p-2 border rounded"},null,512),[[b,D.value.name]])]),t("div",null,[e[58]||(e[58]=t("label",{class:"block text-sm font-medium text-gray-700"},"Phone",-1)),f(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>D.value.phone=o),type:"text",class:"w-full p-2 border rounded"},null,512),[[b,D.value.phone]])]),t("div",null,[e[59]||(e[59]=t("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),f(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>D.value.email=o),type:"email",class:"w-full p-2 border rounded"},null,512),[[b,D.value.email]])]),t("div",null,[e[60]||(e[60]=t("label",{class:"block text-sm font-medium text-gray-700"},"Address",-1)),f(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=o=>D.value.address=o),class:"w-full p-2 border rounded"},null,512),[[b,D.value.address]])])]),t("div",Do,[t("button",{onClick:e[12]||(e[12]=o=>ae.value=!1),class:"px-4 py-2 bg-gray-200 rounded-lg"}," Cancel "),t("button",{onClick:We,class:"px-4 py-2 bg-teal-800 text-white rounded-lg"}," Save Customer ")])])])):g("",!0),oe.value?(a(),Oe(te(h),{key:1,onClose:e[13]||(e[13]=o=>oe.value=!1),onApply:et})):g("",!0),se.value?(a(),r("div",To,[t("div",Vo,[e[73]||(e[73]=t("h3",{class:"text-lg font-bold mb-4 text-teal-600"},"Add New Discount",-1)),t("div",Mo,[t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm font-medium text-gray-500"},"Discount Name*",-1)),f(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>d.value.name=o),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[b,d.value.name]])]),t("div",null,[e[63]||(e[63]=t("label",{class:"block text-sm font-medium text-gray-500"},"Discount Code*",-1)),f(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>d.value.code=o),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[b,d.value.code]])]),t("div",null,[e[65]||(e[65]=t("label",{class:"block text-sm font-medium text-gray-500"},"Discount Type*",-1)),f(t("select",{"onUpdate:modelValue":e[16]||(e[16]=o=>d.value.type=o),class:"w-full p-2 border rounded"},e[64]||(e[64]=[t("option",{value:"percentage"},"Percentage",-1),t("option",{value:"fixed"},"Fixed Amount",-1)]),512),[[Q,d.value.type]])]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium text-gray-500"},"Value*",-1)),f(t("input",{"onUpdate:modelValue":e[17]||(e[17]=o=>d.value.value=o),type:"number",class:"w-full p-2 border rounded",required:""},null,512),[[b,d.value.value]]),d.value.type==="percentage"?(a(),r("p",jo,"Enter percentage (e.g., 10 for 10%)")):g("",!0)]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-sm font-medium text-gray-500"},"Scope*",-1)),f(t("select",{"onUpdate:modelValue":e[18]||(e[18]=o=>d.value.scope=o),class:"w-full p-2 border rounded"},e[67]||(e[67]=[t("option",{value:"product"},"Specific Product",-1),t("option",{value:"general"},"Entire Order",-1)]),512),[[Q,d.value.scope]])]),d.value.scope==="product"?(a(),r("div",Ro,[e[69]||(e[69]=t("label",{class:"block text-sm font-medium text-gray-500"},"Apply to Product*",-1)),f(t("select",{"onUpdate:modelValue":e[19]||(e[19]=o=>d.value.product_id=o),class:"w-full p-2 border rounded",required:""},[(a(!0),r(R,null,A(p.value,o=>(a(),r("option",{value:o.product.id},v(o.product.name),9,Ao))),256))],512),[[Q,d.value.product_id]])])):g("",!0),t("div",Po,[t("div",null,[e[70]||(e[70]=t("label",{class:"block text-sm font-medium text-gray-500"},"Start Date",-1)),f(t("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>d.value.start_date=o),type:"date",class:"w-full p-2 border rounded"},null,512),[[b,d.value.start_date]])]),t("div",null,[e[71]||(e[71]=t("label",{class:"block text-sm font-medium text-gray-500"},"End Date",-1)),f(t("input",{"onUpdate:modelValue":e[21]||(e[21]=o=>d.value.end_date=o),type:"date",class:"w-full p-2 border rounded"},null,512),[[b,d.value.end_date]])])]),t("div",null,[t("label",$o,[f(t("input",{"onUpdate:modelValue":e[22]||(e[22]=o=>d.value.is_active=o),type:"checkbox",class:"rounded border-gray-300 text-teal-600 shadow-sm focus:border-teal-300 focus:ring focus:ring-teal-200 focus:ring-opacity-50"},null,512),[[ft,d.value.is_active]]),e[72]||(e[72]=t("span",{class:"ml-2 text-sm text-gray-700"},"Active",-1))])])]),t("div",Lo,[t("button",{onClick:e[23]||(e[23]=o=>se.value=!1),class:"px-4 py-2 bg-gray-200 rounded-lg"}," Cancel "),t("button",{onClick:Ye,class:"px-4 py-2 bg-teal-800 text-white rounded-lg"}," Save & Apply Discount ")])])])):g("",!0),z.value&&J.value?(a(),Oe(te(L),{key:3,order:J.value,"business-info":ze.value,ref:"thermalInvoice",onClose:e[24]||(e[24]=o=>z.value=!1)},null,8,["order","business-info"])):g("",!0),z.value?(a(),r("button",{key:4,onClick:e[25]||(e[25]=o=>s.$refs.thermalInvoice.printInvoice()),class:"fixed bottom-4 right-4 bg-teal-800 text-white p-3 rounded-full shadow-lg z-50"},e[74]||(e[74]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)]))):g("",!0),le.value?(a(),r("div",Eo,[t("div",Bo,[t("div",Oo,[e[76]||(e[76]=t("h3",{class:"text-lg font-bold"},"Saved Draft Orders",-1)),t("button",{onClick:e[26]||(e[26]=o=>le.value=!1),class:"text-gray-500 hover:text-gray-700"},e[75]||(e[75]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),j.value.length===0?(a(),r("div",Io," No draft orders saved ")):(a(),r("div",Uo,[(a(!0),r(R,null,A(j.value,o=>{var c;return a(),r("div",{key:o.id,class:"border rounded-lg p-4"},[t("div",zo,[t("div",null,[t("h4",No,"Draft #"+v(o.id),1),t("p",Fo," Customer: "+v(((c=o.customer)==null?void 0:c.name)||"No customer"),1),t("p",Ho,v(new Date(o.createdAt).toLocaleString()),1),t("p",Zo," Items: "+v(o.items.length)+" | Total: "+v(x(o.total)),1)]),t("div",Ko,[t("button",{onClick:S=>Fe(o),class:"px-3 py-1 bg-teal-600 text-white rounded hover:bg-teal-700 text-sm"}," Load ",8,Qo),t("button",{onClick:S=>He(o.id),class:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm"}," Delete ",8,Go)])])])}),128))]))])])):g("",!0),Y.value?(a(),r("div",Jo,[t("div",Yo,[t("div",Wo,[e[78]||(e[78]=t("h3",{class:"text-lg font-bold text-teal-600"},"Process Refund",-1)),t("button",{onClick:e[27]||(e[27]=o=>Y.value=!1),class:"text-gray-500 hover:text-gray-700"},e[77]||(e[77]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",Xo,[t("div",null,[e[79]||(e[79]=t("label",{class:"block text-sm font-medium text-gray-500"},"Order #",-1)),t("input",{value:(n=N.value)==null?void 0:n.order_number,type:"text",class:"w-full p-2 border rounded",disabled:""},null,8,es)]),t("div",null,[e[80]||(e[80]=t("label",{class:"block text-sm font-medium text-gray-500"},"Original Amount",-1)),t("input",{value:x((i=N.value)==null?void 0:i.total),type:"text",class:"w-full p-2 border rounded",disabled:""},null,8,ts)]),t("div",null,[e[81]||(e[81]=t("label",{class:"block text-sm font-medium text-gray-500"},"Refund Amount*",-1)),f(t("input",{"onUpdate:modelValue":e[28]||(e[28]=o=>F.value=o),type:"number",max:(l=N.value)==null?void 0:l.total_amount,class:"w-full p-2 border rounded",required:""},null,8,os),[[b,F.value,void 0,{number:!0}]])]),t("div",null,[e[83]||(e[83]=t("label",{class:"block text-sm font-medium text-gray-500"},"Payment Method*",-1)),f(t("select",{"onUpdate:modelValue":e[29]||(e[29]=o=>ce.value=o),class:"w-full p-2 border rounded"},e[82]||(e[82]=[t("option",{value:"cash"},"Cash",-1),t("option",{value:"card"},"Card",-1),t("option",{value:"transfer"},"Bank Transfer",-1)]),512),[[Q,ce.value]])]),t("div",null,[e[84]||(e[84]=t("label",{class:"block text-sm font-medium text-gray-500"},"Reason for Refund",-1)),f(t("textarea",{"onUpdate:modelValue":e[30]||(e[30]=o=>ne.value=o),class:"w-full p-2 border rounded",rows:"3"},null,512),[[b,ne.value]])])]),t("div",ss,[t("button",{onClick:e[31]||(e[31]=o=>Y.value=!1),class:"px-4 py-2 bg-gray-200 text-gray-500 rounded-lg hover:bg-gray-300"}," Cancel "),t("button",{onClick:Ke,class:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-red-700"}," Process Refund ")])])])):g("",!0),ve.value?(a(),r("div",ls,[t("div",ns,[t("div",as,[e[86]||(e[86]=t("h3",{class:"text-lg font-bold"},"Search Order to Refund",-1)),t("button",{onClick:e[32]||(e[32]=o=>ve.value=!1),class:"text-gray-500 hover:text-gray-700"},e[85]||(e[85]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",rs,[t("div",is,[f(t("input",{"onUpdate:modelValue":e[33]||(e[33]=o=>W.value=o),onKeyup:ht(_e,["enter"]),type:"text",placeholder:"Search by order number, customer name, or phone",class:"w-full p-3 border border-gray-300 rounded-lg pr-10"},null,544),[[b,W.value]]),t("button",{onClick:_e,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-teal-800"},e[87]||(e[87]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)]))])]),pe.value.length===0?(a(),r("div",us,[W.value?(a(),r("p",ds,'No orders found matching "'+v(W.value)+'"',1)):(a(),r("p",cs,"Enter search terms to find orders"))])):(a(),r("div",vs,[(a(!0),r(R,null,A(pe.value,o=>{var c;return a(),r("div",{key:o.id,class:"border-b border-gray-200 py-3 hover:bg-gray-50 cursor-pointer",onClick:S=>Ze(o)},[t("div",ms,[t("div",null,[t("h4",gs,"Order #"+v(o.order_no),1),t("p",fs,v(((c=o.customer)==null?void 0:c.name)||"No customer")+" | "+v(x(o.total))+" | "+v(new Date(o.created_at).toLocaleString()),1)]),t("div",null,[t("span",{class:ee([{"bg-green-100 text-green-800":o.status==="completed","bg-red-100 text-red-800":o.status==="refunded","bg-yellow-100 text-yellow-800":o.status==="partially_refunded"},"text-xs px-2 py-1 rounded-full"])},v(o.status),3)])])],8,ps)}),128))]))])])):g("",!0),t("div",hs,[t("button",{onClick:Ee,class:"p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition"},e[88]||(e[88]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])),t("button",{onClick:Le,class:ee([{"bg-red-500 hover:bg-red-600 animate-pulse":w.value,"bg-teal-800 hover:bg-teal-700":!w.value},"p-4 text-white rounded-full shadow-lg transition-all duration-300 relative"])},[e[89]||(e[89]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 016 0v6a3 3 0 01-3 3z"})],-1)),w.value?(a(),r("div",bs)):g("",!0)],2)]),he.value?(a(),r("div",ys,[t("div",xs,[w.value?(a(),r("svg",ws,e[90]||(e[90]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 016 0v6a3 3 0 01-3 3z"},null,-1)]))):g("",!0),t("span",ks,v(Ae.value),1)])])):g("",!0),ue.value?(a(),r("div",Cs,[t("div",_s,[t("div",Ss,[e[92]||(e[92]=t("h3",{class:"text-lg font-bold text-teal-800"},"Voice Commands & Settings",-1)),t("button",{onClick:e[34]||(e[34]=o=>ue.value=!1),class:"text-gray-500 hover:text-gray-700"},e[91]||(e[91]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e[93]||(e[93]=bt('<div class="mb-6 p-4 bg-blue-50 rounded-lg" data-v-51a96117><h4 class="font-semibold text-blue-800 mb-2" data-v-51a96117>ðŸŽ¤ For Better Voice Recognition:</h4><ul class="text-sm text-blue-700 space-y-1" data-v-51a96117><li data-v-51a96117>â€¢ <strong data-v-51a96117>Speak clearly and at a normal pace</strong> - not too fast or slow</li><li data-v-51a96117>â€¢ <strong data-v-51a96117>Use a headset microphone</strong> for best results</li><li data-v-51a96117>â€¢ <strong data-v-51a96117>Reduce background noise</strong> when possible</li><li data-v-51a96117>â€¢ <strong data-v-51a96117>Say exact product names</strong> as shown on screen</li><li data-v-51a96117>â€¢ <strong data-v-51a96117>Keep the microphone 6-12 inches</strong> from your mouth</li></ul></div><div class="grid md:grid-cols-2 gap-6" data-v-51a96117><div class="space-y-3" data-v-51a96117><h4 class="font-semibold text-teal-700 border-b pb-2" data-v-51a96117>Quick Start Commands</h4><div class="space-y-2" data-v-51a96117><div class="flex justify-between items-center p-2 hover:bg-gray-50 rounded" data-v-51a96117><span class="text-gray-600" data-v-51a96117>Add product:</span><code class="bg-teal-100 text-teal-800 px-2 py-1 rounded text-sm" data-v-51a96117>&quot;add Coca Cola&quot;</code></div><div class="flex justify-between items-center p-2 hover:bg-gray-50 rounded" data-v-51a96117><span class="text-gray-600" data-v-51a96117>Search:</span><code class="bg-teal-100 text-teal-800 px-2 py-1 rounded text-sm" data-v-51a96117>&quot;search chips&quot;</code></div><div class="flex justify-between items-center p-2 hover:bg-gray-50 rounded" data-v-51a96117><span class="text-gray-600" data-v-51a96117>Quantity:</span><code class="bg-teal-100 text-teal-800 px-2 py-1 rounded text-sm" data-v-51a96117>&quot;increase Coke&quot;</code></div><div class="flex justify-between items-center p-2 hover:bg-gray-50 rounded" data-v-51a96117><span class="text-gray-600" data-v-51a96117>Payment:</span><code class="bg-teal-100 text-teal-800 px-2 py-1 rounded text-sm" data-v-51a96117>&quot;make payment&quot;</code></div></div></div><div class="space-y-3" data-v-51a96117><h4 class="font-semibold text-teal-700 border-b pb-2" data-v-51a96117>All Available Commands</h4><div class="space-y-2 text-sm" data-v-51a96117><div data-v-51a96117><strong data-v-51a96117>Products:</strong> &quot;add [name]&quot;, &quot;search [term]&quot;</div><div data-v-51a96117><strong data-v-51a96117>Cart:</strong> &quot;increase/decrease [product]&quot;, &quot;remove [product]&quot;</div><div data-v-51a96117><strong data-v-51a96117>Discount:</strong> &quot;apply discount [code]&quot;</div><div data-v-51a96117><strong data-v-51a96117>Payment:</strong> &quot;make payment&quot;, &quot;cash&quot;, &quot;card&quot;</div><div data-v-51a96117><strong data-v-51a96117>Receipt:</strong> &quot;print receipt&quot;</div><div data-v-51a96117><strong data-v-51a96117>Navigation:</strong> &quot;clear cart&quot;, &quot;show all&quot;</div><div data-v-51a96117><strong data-v-51a96117>Control:</strong> &quot;help&quot;, &quot;stop&quot;</div></div></div></div><div class="mt-6 p-4 bg-orange-50 rounded-lg" data-v-51a96117><h4 class="font-semibold text-orange-800 mb-2" data-v-51a96117>Troubleshooting</h4><div class="text-sm text-orange-700 space-y-1" data-v-51a96117><p data-v-51a96117><strong data-v-51a96117>Not working?</strong></p><ul class="list-disc list-inside ml-2" data-v-51a96117><li data-v-51a96117>Refresh the page and allow microphone access</li><li data-v-51a96117>Use Google Chrome or Microsoft Edge</li><li data-v-51a96117>Check your microphone permissions</li><li data-v-51a96117>Speak louder and more clearly</li></ul></div></div>',3)),t("div",qs,[t("button",{onClick:e[35]||(e[35]=o=>ue.value=!1),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition"}," Close "),t("button",{onClick:Le,class:ee([{"bg-red-500 hover:bg-red-600":w.value,"bg-teal-800 hover:bg-teal-700":!w.value},"px-4 py-2 text-white rounded-lg transition"])},v(w.value?"Stop Listening":"Start Listening"),3)])])])):g("",!0)])}}},js=xt(Ds,[["__scopeId","data-v-51a96117"]]);export{js as default};
