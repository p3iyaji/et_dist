import{r as p,o as S,l as C,c as U,w as L,e as n,f as e,g as d,h as y,t as g,j as f,m as V,k as b,p as a,v as u,F as M,i as N,A as B,B as v}from"./index-DN1la__8.js";import{u as z}from"./settingsStore-B-d95HMW.js";import{_ as P}from"./AppLayout-vBxF1_vo.js";const R={class:"min-h-screen bg-gray-50 py-8"},j={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},T={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},A={class:"flex items-center"},E={class:"text-green-800"},D={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},G={class:"flex items-center"},F={class:"text-red-800"},O={class:"bg-white shadow rounded-lg"},H={class:"p-6 space-y-6"},$={class:"flex items-center space-x-6"},q={class:"shrink-0"},I=["src"],J={key:1,class:"h-16 w-16 bg-gray-200 rounded-lg flex items-center justify-center"},K={class:"flex space-x-3"},Q={class:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},W={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},X={class:"bg-white shadow rounded-lg"},Y={class:"p-6 space-y-6"},Z={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},ee=["value"],oe={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},te={class:"flex items-end"},se={class:"flex items-center h-5"},le={class:"bg-white shadow rounded-lg"},re={class:"p-6 space-y-6"},ae={class:"space-y-4"},ne={class:"flex items-center"},de={class:"flex items-center"},ie={class:"flex justify-end"},ue=["disabled"],me={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},ye={__name:"Settings",setup(ce){const l=z(),t=p({company_name:"",company_logo:null,company_address:"",company_phone:"",company_email:"",currency:"NGN",currency_symbol:"₦",tax_rate:0,tax_inclusive:!1,receipt_footer:"",receipt_show_logo:!0,receipt_show_tax:!0,remove_logo:!1}),i=p(null),m=p(!1),c=p(""),x=p([{code:"NGN",symbol:"₦",name:"Nigerian Naira"},{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"€",name:"Euro"},{code:"GBP",symbol:"£",name:"British Pound"}]);S(async()=>{await l.fetchSettings(),l.settings&&(Object.keys(t.value).forEach(r=>{l.settings[r]!==void 0&&(t.value[r]=l.settings[r])}),l.settings.company_logo&&(i.value=l.getLogoUrl()))});const _=r=>{const o=r.target.files[0];if(o){t.value.company_logo=o,t.value.remove_logo=!1;const s=new FileReader;s.onload=k=>{i.value=k.target.result},s.readAsDataURL(o)}},w=()=>{t.value.company_logo=null,t.value.remove_logo=!0,i.value=null},h=async()=>{m.value=!0,c.value="";const r=await l.updateSettings(t.value);r.success&&(c.value=r.message,Object.keys(t.value).forEach(o=>{l.settings[o]!==void 0&&(t.value[o]=l.settings[o])}),l.settings.company_logo&&!t.value.remove_logo&&(i.value=l.getLogoUrl()),setTimeout(()=>{c.value=""},3e3)),m.value=!1};return C(()=>x.value.find(r=>r.code===t.value.currency)||x.value[0]),(r,o)=>(n(),U(P,null,{default:L(()=>[e("div",R,[e("div",j,[o[32]||(o[32]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Application Settings"),e("p",{class:"mt-2 text-sm text-gray-600"}," Customize your POS system appearance and behavior ")],-1)),c.value?(n(),d("div",T,[e("div",A,[o[11]||(o[11]=e("svg",{class:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("span",E,g(c.value),1)])])):y("",!0),f(l).error?(n(),d("div",D,[e("div",G,[o[12]||(o[12]=e("svg",{class:"w-5 h-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("span",F,g(f(l).error),1)])])):y("",!0),e("form",{onSubmit:V(h,["prevent"]),class:"space-y-8"},[e("div",O,[o[21]||(o[21]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Company Information")],-1)),e("div",H,[e("div",null,[o[15]||(o[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Company Logo",-1)),e("div",$,[e("div",q,[i.value?(n(),d("img",{key:0,src:i.value,class:"h-16 w-16 object-cover rounded-lg border border-gray-300"},null,8,I)):(n(),d("div",J,o[13]||(o[13]=[e("svg",{class:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),e("div",K,[e("label",Q,[o[14]||(o[14]=b(" Upload Logo ")),e("input",{type:"file",onChange:_,accept:"image/*",class:"hidden"},null,32)]),i.value?(n(),d("button",{key:0,type:"button",onClick:w,class:"bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Remove ")):y("",!0)])]),o[16]||(o[16]=e("p",{class:"mt-1 text-sm text-gray-500"},"Recommended: 200x200px PNG or JPG",-1))]),e("div",null,[o[17]||(o[17]=e("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Company Name *",-1)),a(e("input",{type:"text",id:"company_name","onUpdate:modelValue":o[0]||(o[0]=s=>t.value.company_name=s),required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[u,t.value.company_name]])]),e("div",null,[o[18]||(o[18]=e("label",{for:"company_address",class:"block text-sm font-medium text-gray-700"},"Company Address",-1)),a(e("textarea",{id:"company_address","onUpdate:modelValue":o[1]||(o[1]=s=>t.value.company_address=s),rows:"3",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[u,t.value.company_address]])]),e("div",W,[e("div",null,[o[19]||(o[19]=e("label",{for:"company_phone",class:"block text-sm font-medium text-gray-700"},"Phone Number",-1)),a(e("input",{type:"text",id:"company_phone","onUpdate:modelValue":o[2]||(o[2]=s=>t.value.company_phone=s),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[u,t.value.company_phone]])]),e("div",null,[o[20]||(o[20]=e("label",{for:"company_email",class:"block text-sm font-medium text-gray-700"},"Email Address",-1)),a(e("input",{type:"email",id:"company_email","onUpdate:modelValue":o[3]||(o[3]=s=>t.value.company_email=s),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[u,t.value.company_email]])])])])]),e("div",X,[o[26]||(o[26]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Currency & Tax Settings")],-1)),e("div",Y,[e("div",Z,[e("div",null,[o[22]||(o[22]=e("label",{for:"currency",class:"block text-sm font-medium text-gray-700"},"Currency",-1)),a(e("select",{id:"currency","onUpdate:modelValue":o[4]||(o[4]=s=>t.value.currency=s),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},[(n(!0),d(M,null,N(x.value,s=>(n(),d("option",{key:s.code,value:s.code},g(s.name)+" ("+g(s.symbol)+") ",9,ee))),128))],512),[[B,t.value.currency]])]),e("div",null,[o[23]||(o[23]=e("label",{for:"currency_symbol",class:"block text-sm font-medium text-gray-700"},"Currency Symbol",-1)),a(e("input",{type:"text",id:"currency_symbol","onUpdate:modelValue":o[5]||(o[5]=s=>t.value.currency_symbol=s),maxlength:"5",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[u,t.value.currency_symbol]])])]),e("div",oe,[e("div",null,[o[24]||(o[24]=e("label",{for:"tax_rate",class:"block text-sm font-medium text-gray-700"},"Tax Rate (%)",-1)),a(e("input",{type:"number",id:"tax_rate","onUpdate:modelValue":o[6]||(o[6]=s=>t.value.tax_rate=s),min:"0",max:"100",step:"0.01",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[u,t.value.tax_rate]])]),e("div",te,[e("div",se,[a(e("input",{id:"tax_inclusive","onUpdate:modelValue":o[7]||(o[7]=s=>t.value.tax_inclusive=s),type:"checkbox",class:"focus:ring-teal-500 h-4 w-4 text-teal-600 border-gray-300 rounded"},null,512),[[v,t.value.tax_inclusive]])]),o[25]||(o[25]=e("div",{class:"ml-3 text-sm"},[e("label",{for:"tax_inclusive",class:"font-medium text-gray-700"},"Prices include tax"),e("p",{class:"text-gray-500"},"Tax will be included in product prices")],-1))])])])]),e("div",le,[o[30]||(o[30]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Receipt Settings")],-1)),e("div",re,[e("div",null,[o[27]||(o[27]=e("label",{for:"receipt_footer",class:"block text-sm font-medium text-gray-700"},"Receipt Footer Message",-1)),a(e("textarea",{id:"receipt_footer","onUpdate:modelValue":o[8]||(o[8]=s=>t.value.receipt_footer=s),rows:"3",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:"Thank you for your business!"},null,512),[[u,t.value.receipt_footer]])]),e("div",ae,[e("div",ne,[a(e("input",{id:"receipt_show_logo","onUpdate:modelValue":o[9]||(o[9]=s=>t.value.receipt_show_logo=s),type:"checkbox",class:"focus:ring-teal-500 h-4 w-4 text-teal-600 border-gray-300 rounded"},null,512),[[v,t.value.receipt_show_logo]]),o[28]||(o[28]=e("label",{for:"receipt_show_logo",class:"ml-3 text-sm font-medium text-gray-700"}," Show company logo on receipts ",-1))]),e("div",de,[a(e("input",{id:"receipt_show_tax","onUpdate:modelValue":o[10]||(o[10]=s=>t.value.receipt_show_tax=s),type:"checkbox",class:"focus:ring-teal-500 h-4 w-4 text-teal-600 border-gray-300 rounded"},null,512),[[v,t.value.receipt_show_tax]]),o[29]||(o[29]=e("label",{for:"receipt_show_tax",class:"ml-3 text-sm font-medium text-gray-700"}," Show tax breakdown on receipts ",-1))])])])]),e("div",ie,[e("button",{type:"submit",disabled:m.value||f(l).isLoading,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:opacity-50 disabled:cursor-not-allowed"},[m.value||f(l).isLoading?(n(),d("svg",me,o[31]||(o[31]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):y("",!0),b(" "+g(m.value||f(l).isLoading?"Saving...":"Save Settings"),1)],8,ue)])],32)])])]),_:1}))}};export{ye as default};
