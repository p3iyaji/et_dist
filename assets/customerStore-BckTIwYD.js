import{C as y,r as d,u as h,b as c,D as C}from"./index-DN1la__8.js";const A=y("customer",()=>{const u=d({}),v=d(null),o=d(!1),a=d({}),p=h();return{customers:u,currentCustomer:v,isLoading:o,errorMessage:a,fetchCustomers:async(s=1)=>{var t,r;p.isAuthenticated;try{o.value=!0;const e=await c.get(`/api/customers?page=${s}`);u.value=e.data}catch(e){a.value=((r=(t=e.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to fetch customers"}finally{o.value=!1}},fetchCustomerById:async s=>{try{return(await c.get(`/api/customers/${s}`)).data}catch{return a.value="Failed to fetch customer",null}},createCustomer:async s=>{var t,r,e;try{o.value=!0,a.value={};const l=await c.post("/api/customers",s);return a.value={},{success:!0,data:l.data}}catch(l){return((t=l.response)==null?void 0:t.status)===422?a.value=l.response.data.errors||{}:a.value={general:[((e=(r=l.response)==null?void 0:r.data)==null?void 0:e.message)||l.message||"Failed to create customer"]},{success:!1,error:a.value}}finally{o.value=!1}},updateCustomer:async(s,t)=>{var r,e,l,i;try{o.value=!0,a.value={};const n=await c.put(`/api/customers/${s}`,t),m=(r=u.value.data)==null?void 0:r.findIndex(f=>f.id===s);return m!==-1&&u.value.data&&(u.value.data[m]=n.data.data),n.data}catch(n){return n instanceof C&&((e=n.response)==null?void 0:e.status)===422?a.value=n.response.data.errors:a.value={general:[((i=(l=n.response)==null?void 0:l.data)==null?void 0:i.message)||"Failed to update customer"]},null}finally{o.value=!1}},deleteCustomer:async s=>{var t,r;try{return o.value=!0,a.value=null,await c.delete(`/api/customers/${s}`),u.value.data=u.value.data.filter(e=>e.id!=s),u.value.total-=1,u.value.to-=1,!0}catch(e){throw a.value=((r=(t=e.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to delete customer",e}finally{o.value=!1}}}});export{A as u};
