import{B as y,r as c,u as h,b as p,C as E}from"./index-C6ml-qKZ.js";const A=y("expense",()=>{const n=c({}),v=c(null),a=c({}),l=c(!1),x=h();return{expenses:n,currentExpense:v,isLoading:l,errorMessage:a,fetchExpenses:async(t=1)=>{var s,r;await x.isAuthenticated;try{l.value=!0;const e=await p.get(`/api/expenses?page=${t}`);n.value=e.data}catch(e){a.value=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to fetch expenses"}finally{l.value=!1}},createExpense:async t=>{var s,r,e;try{l.value=!0,a.value={};const u=await p.post("/api/expenses",t);return a.value={},{success:!0,data:u.data}}catch(u){return((s=u.response)==null?void 0:s.status)===422?a.value=u.response.data.errors||{}:a.value={general:[((e=(r=u.response)==null?void 0:r.data)==null?void 0:e.message)||u.message||"Failed to create expense"]},{success:!1,error:a.value}}finally{l.value=!1}},updateExpense:async(t,s)=>{var r,e,u,d;try{l.value=!0,a.value=null;const o=await p.put(`/api/expenses/${t}`,s),i=(r=n.value.data)==null?void 0:r.findIndex(f=>f.id===t);return i!==-1&&n.value.data&&(n.value.data[i]=o.data),o.data}catch(o){return o instanceof E&&((e=o.response)==null?void 0:e.status)===422?a.value=o.response.data.errors:a.value={general:[((d=(u=o.response)==null?void 0:u.data)==null?void 0:d.message)||"Failed to update expense"]},null}finally{l.value=!1}},fetchExpenseById:async t=>{try{return(await p.get(`/api/expenses/${t}`)).data}catch{return a.value="Failed to fetch expense",null}},deleteExpense:async t=>{var s,r;try{return l.value=!0,a.value=null,await p.delete(`/api/expenses/${t}`),n.value.data=n.value.data.filter(e=>e.id!=t),n.value.total-=1,n.value.to-=1,!0}catch(e){throw a.value=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to delete expense",e}finally{l.value=!1}}}});export{A as u};
