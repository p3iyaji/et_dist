import{r as y,u as U,o as C,b as _,y as E,H as w,c as B,w as N,q as j,e as l,f as r,g as d,h as i,j as a,t as n,l as A,m as c,v as g,x as L,A as z,n as R,k as T}from"./index-C6ml-qKZ.js";import{_ as D}from"./AppLayout-CcZViM9-.js";import{s as H}from"./multiselect-BWbrnRgC.js";import{u as P}from"./supplierStore-DyJ16cU6.js";import{S as x}from"./sweetalert2.esm.all-BQIkj5Wb.js";const $={class:"max-w-4xl mx-auto"},q={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden"},I={class:"p-6"},O={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},F={class:"space-y-6"},G={key:0,class:"text-red-600"},J={key:0,class:"text-red-600"},K={key:0,class:"text-red-600"},Q={key:0,class:"text-red-600"},W={key:0,class:"text-red-600"},X={class:"space-y-2"},Y={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},Z={key:1,class:"text-red-600 text-sm"},ee={class:"flex items-center"},re={class:"flex justify-end pt-4"},te=["disabled"],se={key:0},ae={key:1,class:"flex items-center"},pe={__name:"UpdateSupplier",setup(oe){const s=P(),k=j(),v=E(),f=y([]),h=y(!0),b=U();y([]);const t=y({name:"",contact_person:"",phone:"",address:"",email:"",is_active:!0,product_ids:[]});C(async()=>{try{h.value=!0;const u=await _.get("/api/products");f.value=u.data.data.map(m=>({value:m.id.toString(),label:m.name}));const e=v.params.id,o=await _.get(`/api/suppliers/${e}`),p=o.data.supplier;t.value={name:p.name,contact_person:p.contact_person,phone:p.phone,address:p.address,email:p.email,is_active:p.is_active,product_ids:o.data.products.map(m=>m.id.toString())},console.log("form.value.product_ids:",t.value.product_ids),console.log("products (Multiselect options):",f.value),w(()=>{t.value.product_ids=[...t.value.product_ids]})}catch(u){console.error("Error loading data:",u),x.fire({icon:"error",title:"Error loading supplier",text:u.message})}finally{h.value=!1}});const S=()=>{w(()=>{t.value.product_ids=[...t.value.product_ids]})},M=async()=>{s.errorMessage={},await s.updateSupplier(v.params.id,t.value)?(x.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,title:"Supplier updated successfully!"}),k.push("/suppliers")):s.errorMessage.general&&x.fire({icon:"error",title:"Error",text:s.errorMessage.general[0]})},V=()=>{k.go(-1)};return(u,e)=>(l(),B(D,null,{default:N(()=>[r("div",$,[r("div",q,[r("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[r("div",{class:"flex justify-between items-center"},[e[7]||(e[7]=r("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Update Supplier ",-1)),r("button",{onClick:V,type:"button",class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"}," Back ")])]),r("div",I,[a(s).errorMessage.general?(l(),d("div",O,n(a(s).errorMessage.general[0]),1)):i("",!0),r("form",{onSubmit:A(M,["prevent"])},[r("div",F,[r("div",null,[e[8]||(e[8]=r("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Supplier Name ",-1)),c(r("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.name=o),type:"text",id:"name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Enter supplier name"},null,512),[[g,t.value.name]]),a(s).errorMessage.name?(l(),d("span",G,n(a(s).errorMessage.name[0]),1)):i("",!0)]),r("div",null,[e[9]||(e[9]=r("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Contact Person ",-1)),c(r("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.contact_person=o),type:"text",id:"contact_person",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Enter supplier name"},null,512),[[g,t.value.contact_person]]),a(s).errorMessage.contact_person?(l(),d("span",J,n(a(s).errorMessage.contact_person[0]),1)):i("",!0)]),r("div",null,[e[10]||(e[10]=r("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Supplier Email ",-1)),c(r("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.email=o),type:"text",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Enter supplier email"},null,512),[[g,t.value.email]]),a(s).errorMessage.email?(l(),d("span",K,n(a(s).errorMessage.email[0]),1)):i("",!0)]),r("div",null,[e[11]||(e[11]=r("label",{for:"phone",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Supplier phone ",-1)),c(r("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.phone=o),type:"text",id:"phone",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Enter supplier phone"},null,512),[[g,t.value.phone]]),a(s).errorMessage.phone?(l(),d("span",Q,n(a(s).errorMessage.phone[0]),1)):i("",!0)]),r("div",null,[e[12]||(e[12]=r("label",{for:"address",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Supplier address ",-1)),c(r("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.address=o),type:"text",id:"address",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Enter supplier phone"},null,512),[[g,t.value.address]]),a(s).errorMessage.address?(l(),d("span",W,n(a(s).errorMessage.address[0]),1)):i("",!0)]),r("div",X,[e[13]||(e[13]=r("label",{class:"block text-sm font-medium text-gray-900 dark:text-white"}," Select Products ",-1)),L(a(H),{modelValue:t.value.product_ids,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.product_ids=o),options:f.value,mode:"tags",closeOnSelect:!1,searchable:!0,placeholder:"Select products",trackBy:"value",label:"label",object:!1,class:"multiselect",onSelect:S},null,8,["modelValue","options"]),t.value.product_ids&&t.value.product_ids.length>0?(l(),d("p",Y," Selected: "+n(t.value.product_ids.length)+" product(s) ",1)):i("",!0),a(s).errorMessage.product_ids?(l(),d("span",Z,n(a(s).errorMessage.product_ids[0]),1)):i("",!0)]),r("div",ee,[c(r("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.is_active=o),type:"checkbox",id:"is_active",class:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500 dark:focus:ring-teal-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[z,t.value.is_active]]),e[14]||(e[14]=r("label",{for:"is_active",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Active ",-1))]),r("div",re,[r("button",{type:"submit",disabled:a(b).isLoading,class:R(["px-6 py-3 bg-teal-600 hover:bg-teal-700 text-white font-medium rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200",{"opacity-50 cursor-not-allowed":a(b).isLoading}])},[a(b).isLoading?(l(),d("span",ae,e[15]||(e[15]=[r("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),T(" Updating... ")]))):(l(),d("span",se,"Update Supplier"))],10,te)])])],32)])])])]),_:1}))}};export{pe as default};
