import{B as h,r as d,u as g,b as n,C as p}from"./index-C6ml-qKZ.js";const A=h("product",()=>{const c=d({}),f=d(null),u=d(!1),t=d({}),v=g();return{products:c,currentProduct:f,isLoading:u,errorMessage:t,fetchProducts:async(r=1)=>{var a,s;await v.isAuthenticated;try{u.value=!0;const e=await n.get(`/api/products?page=${r}`);c.value=e.data}catch(e){t.value=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to fetch products"}finally{u.value=!1}},createProduct:async r=>{var a,s,e;try{u.value=!0,t.value={};const o=await n.post("/api/products",r,{headers:{"Content-Type":"multipart/form-data"}});return t.value={},{success:!0,data:o.data}}catch(o){return o instanceof p&&((a=o.response)==null?void 0:a.status)===422?t.value=o.response.data.errors:t.value={general:[((e=(s=o.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to create product"]},{success:!1,error:t.value}}finally{u.value=!1}},updateProduct:async(r,a)=>{var s,e,o;try{u.value=!0,t.value=null;const l=await n.post(`/api/products/${r}`,a),i=c.value.data.findIndex(y=>y.id===r);return i!==-1&&(c.value.data[i]=l.data),l.data}catch(l){return l instanceof p&&((s=l.response)==null?void 0:s.status)===422?t.value=l.response.data.errors:t.value={general:[((o=(e=l.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to update category"]},null}finally{u.value=!1}},fetchProductById:async r=>{try{return(await n.get(`/api/products/${r}`)).data}catch{return t.value="Failed to fetch product",null}},deleteProduct:async r=>{var a,s;try{return u.value=!0,t.value=null,await n.delete(`/api/products/${r}`),c.value.data=c.value.data.filter(e=>e.id!=r),c.value.total-=1,c.value.to-=1,!0}catch(e){throw t.value=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to delete product",e}finally{u.value=!1}}}});export{A as u};
