import{C as d,r as u,b as p}from"./index-DN1la__8.js";const y=d("settings",()=>{const s=u({}),r=u(!1),c=u(null),i="https://api.realpayglobal.co.uk";return console.log("Base URL:",i),{settings:s,isLoading:r,error:c,fetchSettings:async()=>{var e,l;r.value=!0;try{const a=await p.get("/api/settings");a.data.success&&(s.value=a.data.settings,console.log("Fetched settings:",s.value))}catch(a){console.error("Error fetching settings: ",a),c.value=((l=(e=a.response)==null?void 0:e.data)==null?void 0:l.message)||"Failed to fetch settings"}finally{r.value=!1}},updateSettings:async e=>{var l,a;r.value=!0,c.value=null;try{const t=new FormData,n={...e,tax_inclusive:!!e.tax_inclusive,receipt_show_logo:!!e.receipt_show_logo,receipt_show_tax:!!e.receipt_show_tax,remove_logo:!!e.remove_logo};Object.keys(n).forEach(o=>{o==="company_logo"&&n[o]instanceof File?t.append("company_logo",n[o]):o==="remove_logo"&&n[o]?t.append("remove_logo","1"):o!=="company_logo"&&(typeof n[o]=="boolean"?t.append(o,n[o]?"1":"0"):t.append(o,n[o]))}),console.log("Sending form data:",Object.fromEntries(t));const g=await p.post("/api/settings",t,{headers:{"Content-Type":"multipart/form-data"}});if(g.data.success)return s.value=g.data.settings,console.log("Updated settings:",s.value),{success:!0,message:g.data.message}}catch(t){return console.error("Error updating settings:",t),c.value=((a=(l=t.response)==null?void 0:l.data)==null?void 0:a.message)||"Failed to update settings",{success:!1,message:c.value}}finally{r.value=!1}},getLogoUrl:()=>{if(s.value.company_logo){const e=`${i}/storage/${s.value.company_logo}?t=${new Date().getTime()}`;return console.log("Generated logo URL with baseUrl:",e),e}return console.log("No company logo found"),null},getCurrencyFormat:e=>`${s.value.currency_symbol||"â‚¦"}${parseFloat(e).toFixed(2)}`,baseUrl:i}});export{y as u};
