import{B as h,r as c,u as U,b as o,C as g}from"./index-BLk6GGVK.js";const B=h("unit",()=>{const n=c({}),p=c(null),u=c(!1),a=c({}),f=U();return{units:n,currentUnit:p,isLoading:u,errorMessage:a,fetchUnits:async(s=1)=>{var t,r;await f.isAuthenticated;try{u.value=!0;const e=await o.get(`/api/units?page=${s}`);n.value=e.data}catch(e){a.value=((r=(t=e.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to fetch Units"}finally{u.value=!1}},createUnit:async s=>{var t,r,e;try{u.value=!0,a.value={};const l=await o.post("/api/units",s);return a.value={},{success:!0,data:l.data}}catch(l){return((t=l.response)==null?void 0:t.status)===422?a.value=l.response.data.errors||{}:a.value={general:[((e=(r=l.response)==null?void 0:r.data)==null?void 0:e.message)||l.message||"Failed to create unit"]},{success:!1,error:a.value}}finally{u.value=!1}},updateUnit:async(s,t)=>{var r,e,l,d;try{u.value=!0,a.value=null;const i=await o.put(`/api/units/${s}`,t),v=(r=n.value.data)==null?void 0:r.findIndex(y=>y.id===s);return v!==-1&&n.value.data&&(n.value.data[v]=i.data),i.data}catch(i){return i instanceof g&&((e=i.response)==null?void 0:e.status)===422?a.value=i.response.data.errors:a.value={general:[((d=(l=i.response)==null?void 0:l.data)==null?void 0:d.message)||"Failed to update unit"]},null}finally{u.value=!1}},fetchUnitById:async s=>{try{return(await o.get(`/api/units/${s}`)).data}catch{return a.value="Failed to fetch unit",null}},deleteUnit:async s=>{var t,r;try{return u.value=!0,a.value=null,await o.delete(`/api/units/${s}`),n.value.data=n.value.data.filter(e=>e.id!=s),n.value.total-=1,n.value.to-=1,!0}catch(e){throw a.value=((r=(t=e.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to delete unit",e}finally{u.value=!1}}}});export{B as u};
