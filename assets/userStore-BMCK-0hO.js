import{A as f,r as p,u as y,b as c,B as i}from"./index-BddoOAJV.js";const A=f("user",()=>{const o=p({}),d=p(null),l=p(!1),s=p({}),v=y();return{users:o,currentUser:d,isLoading:l,errorMessage:s,fetchUsers:async(t=1)=>{var a,r;v.isAuthenticated;try{l.value=!0;const e=await c.get(`/api/users?page=${t}`,{params:{with_roles:!0}});o.value=e.data}catch(e){s.value=((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch users"}finally{l.value=!1}},createUser:async t=>{var a,r,e;try{l.value=!0,s.value={};const u=await c.post("/api/users",t);return s.value={},{success:!0,data:u.data}}catch(u){return((a=u.response)==null?void 0:a.status)===422?s.value=u.response.data.errors||{}:s.value={general:[((e=(r=u.response)==null?void 0:r.data)==null?void 0:e.message)||u.message||"Failed to create user"]},{success:!1,error:s.value}}finally{l.value=!1}},updateUser:async(t,a)=>{var r,e,u;try{return l.value=!0,s.value={},await c.put(`/api/users/${t}`,a)}catch(n){return n instanceof i&&((r=n.response)==null?void 0:r.status)===422?s.value=n.response.data.errors:s.value={general:[((u=(e=n.response)==null?void 0:e.data)==null?void 0:u.message)||"Failed to update user"]},null}finally{l.value=!1}},updatePass:async(t,a)=>{var r,e,u;try{return l.value=!0,s.value={},await c.post(`/api/password-update/${t}`,a)}catch(n){return n instanceof i&&((r=n.response)==null?void 0:r.status)===422?s.value=n.response.data.errors:s.value={general:[((u=(e=n.response)==null?void 0:e.data)==null?void 0:u.message)||"Failed to update user"]},null}finally{l.value=!1}},fetchUserById:async t=>{try{return(await c.get(`/api/users/${t}`)).data}catch{return s.value="Failed to fetch user",null}},deleteUser:async t=>{var a,r;try{return l.value=!0,s.value=null,await c.delete(`/api/users/${t}`),o.value.data=o.value.data.filter(e=>e.id!=t),o.value.total-=1,o.value.to-=1,!0}catch(e){throw s.value=((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete user",e}finally{l.value=!1}}}});export{A as u};
