import{r as w,o as v,y as M,c as U,w as C,q as B,e as a,f as s,t as l,l as P,m as y,g as d,h as b,n as c,j as o,v as x,k as S}from"./index-C6ml-qKZ.js";import{_ as V}from"./AppLayout-CcZViM9-.js";import{u as E}from"./userStore-lK8HRPx6.js";import{S as h}from"./sweetalert2.esm.all-BQIkj5Wb.js";const j={class:"max-w-4xl mx-auto"},z={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden"},L={class:"p-6 border-b border-gray-200 dark:border-gray-700"},N={class:"flex justify-between items-center"},D={class:"text-2xl font-bold text-gray-900 dark:text-white"},I={class:"p-6"},R={class:"space-y-6"},T={key:0,class:"mt-1 text-sm text-red-600"},q={key:0,class:"mt-1 text-sm text-red-600"},A={class:"flex justify-end pt-4"},H=["disabled"],$={key:0},F={key:1,class:"flex items-center"},W={__name:"UpdatePassword",setup(G){const r=E(),u=B(),p=M(),m=w({}),t=w({password:"",password_confirmation:""});v(async()=>{await r.fetchUsers();const i=p.params.id,e=await r.fetchUserById(i);console.log(e),e&&(t.value={password:e.user.password}),m.value=e==null?void 0:e.user});const _=async()=>{r.errorMessage={},await r.updatePass(p.params.id,t.value)?(h.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,title:"User updated successfully!"}),u.push("/users")):r.errorMessage.general&&h.fire({icon:"error",title:"Error",text:r.errorMessage.general[0]})},k=()=>{u.go(-1)};return(i,e)=>(a(),U(V,null,{default:C(()=>{var f,g;return[s("div",j,[s("div",z,[s("div",L,[s("div",N,[s("h2",D," Change "+l(m.value.name)+" Password ",1),s("button",{onClick:k,type:"button",class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"}," Back ")])]),s("div",I,[s("form",{onSubmit:P(_,["prevent"])},[s("div",R,[s("div",null,[e[2]||(e[2]=s("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," User Password ",-1)),y(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.password=n),type:"password",id:"password",class:c([{"border-red-500":o(r).errorMessage.password,"border-gray-300":!o(r).errorMessage.password},"bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"]),placeholder:"Enter user password"},null,2),[[x,t.value.password]]),(f=o(r).errorMessage)!=null&&f.password?(a(),d("p",T,l(o(r).errorMessage.password[0]),1)):b("",!0)]),s("div",null,[e[3]||(e[3]=s("label",{for:"password_confirmation",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Confirm Password ",-1)),y(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.password_confirmation=n),type:"password",id:"password",class:c([{"border-red-500":o(r).errorMessage.password_confirmation,"border-gray-300":!o(r).errorMessage.password_confirmation},"bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"]),placeholder:"Enter confirmation password"},null,2),[[x,t.value.password_confirmation]]),(g=o(r).errorMessage)!=null&&g.password_confirmation?(a(),d("p",q,l(o(r).errorMessage.password_confirmation[0]),1)):b("",!0)]),s("div",A,[s("button",{type:"submit",disabled:o(r).isLoading,class:c(["px-6 py-3 bg-teal-600 hover:bg-teal-700 text-white font-medium rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200",{"opacity-50 cursor-not-allowed":o(r).isLoading}])},[o(r).isLoading?(a(),d("span",F,e[4]||(e[4]=[s("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Updating... ")]))):(a(),d("span",$,"Update User"))],10,H)])])],32)])])])]}),_:1}))}};export{W as default};
