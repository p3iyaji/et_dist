import{r as M,o as E,y as C,E as S,c as V,w as B,q as U,d as D,e as d,f as r,g as i,h as u,j as a,t as p,l as A,m as g,n as b,v as m,x as L,k as N}from"./index-C6ml-qKZ.js";import{_ as $}from"./AppLayout-CcZViM9-.js";import{u as j}from"./expenseStore-V7UfWlHq.js";import{S as k}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{u as z}from"./expenseCategoryStore-BYIyZg4m.js";const I={class:"max-w-4xl mx-auto"},R={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden"},T={class:"p-6"},F={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},O={class:"space-y-6"},q={key:0,class:"text-red-600"},H={key:0,class:"text-red-600"},P={key:0,class:"text-red-600"},Y={key:0,class:"text-red-600"},G={class:"flex justify-end pt-4"},J=["disabled"],K={key:0},Q={key:1,class:"flex items-center"},ae={__name:"UpdateExpense",setup(W){const t=j(),x=z(),y=U(),f=C(),s=M({name:"",expense_category_id:"",description:"",amount:null,date:""});E(async()=>{await t.fetchExpenses();const n=f.params.id,e=await t.fetchExpenseById(n);console.log(e);try{await x.fetchExpenseCategories()}catch(l){console.error("Error fetching data",l)}e&&(s.value={name:e.name,expense_category_id:e.expense_category_id,description:e.description,date:v(e.date),amount:e.amount})});const w=S(()=>Array.isArray(x.expense_categories.data)?x.expense_categories.data.map(n=>({id:n.id,name:n.name})):[]),v=n=>{if(!n)return"";const e=new Date(n),l=e.getFullYear(),c=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${l}-${c}-${o}`},h=async()=>{t.errorMessage={},await t.updateExpense(f.params.id,s.value)?(k.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,title:"Expense updated successfully!"}),y.push("/expenses")):t.errorMessage.general&&k.fire({icon:"error",title:"Error",text:t.errorMessage.general[0]})},_=()=>{y.go(-1)};return(n,e)=>{const l=D("Multiselect");return d(),V($,null,{default:B(()=>{var c;return[r("div",I,[r("div",R,[r("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[r("div",{class:"flex justify-between items-center"},[e[5]||(e[5]=r("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Update Expense ",-1)),r("button",{onClick:_,type:"button",class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"}," Back ")])]),r("div",T,[a(t).errorMessage.general?(d(),i("div",F,p(a(t).errorMessage.general[0]),1)):u("",!0),r("form",{onSubmit:A(h,["prevent"])},[r("div",O,[r("div",null,[e[6]||(e[6]=r("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Expense Title ",-1)),g(r("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.name=o),type:"text",id:"name",class:b([{"border-red-500":a(t).errorMessage.name,"border-gray-300":!a(t).errorMessage.name},"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"]),placeholder:"Enter expense name"},null,2),[[m,s.value.name]]),(c=a(t).errorMessage)!=null&&c.name?(d(),i("span",q,p(a(t).errorMessage.name[0]),1)):u("",!0)]),r("div",null,[e[7]||(e[7]=r("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Expense Category ",-1)),L(l,{modelValue:s.value.expense_category_id,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.expense_category_id=o),id:"expense_category_id",options:w.value,label:"name",valueProp:"id",searchable:!0,placeholder:"Select a expense category",filterResults:!0,minChars:1,resolveOnLoad:!0,trackBy:"name"},null,8,["modelValue","options"]),a(t).errorMessage.expense_id?(d(),i("span",H,p(a(t).errorMessage.expense_id[0]),1)):u("",!0)]),r("div",null,[e[8]||(e[8]=r("label",{for:"description",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Description ",-1)),g(r("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.description=o),id:"description",rows:"6",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter product description"},null,512),[[m,s.value.description]])]),r("div",null,[e[9]||(e[9]=r("label",{for:"description",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Date ",-1)),g(r("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.date=o),type:"date",id:"date",min:"0",step:"0.01",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},null,512),[[m,s.value.date]]),a(t).errorMessage.date?(d(),i("span",P,p(a(t).errorMessage.date[0]),1)):u("",!0)]),r("div",null,[e[10]||(e[10]=r("label",{for:"description",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Amount ",-1)),g(r("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.amount=o),type:"number",id:"amount",min:"0",step:"0.01",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},null,512),[[m,s.value.amount]]),a(t).errorMessage.amount?(d(),i("span",Y,p(a(t).errorMessage.amount[0]),1)):u("",!0)]),r("div",G,[r("button",{type:"submit",disabled:a(t).isLoading,class:b(["px-6 py-3 bg-teal-600 hover:bg-teal-700 text-white font-medium rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200",{"opacity-50 cursor-not-allowed":a(t).isLoading}])},[a(t).isLoading?(d(),i("span",Q,e[11]||(e[11]=[r("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),N(" Updating... ")]))):(d(),i("span",K,"Update Expense"))],10,J)])])],32)])])])]}),_:1})}}};export{ae as default};
