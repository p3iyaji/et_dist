import{B as S,r as o,u as h,b as i,C as g}from"./index-BLk6GGVK.js";const B=S("supplier",()=>{const l=o({}),v=o(null),u=o(!1),a=o({}),f=h();return{suppliers:l,currentSupplier:v,isLoading:u,errorMessage:a,fetchSuppliers:async(t=1)=>{var s,r;f.isAuthenticated;try{u.value=!0;const e=await i.get(`/api/suppliers?page=${t}`);l.value=e.data}catch(e){a.value=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to fetch suppliers"}finally{u.value=!1}},fetchSupplierById:async t=>{try{return(await i.get(`/api/suppliers/${t}`)).data}catch{return a.value="Failed to fetch supplier",null}},createSupplier:async t=>{var s,r,e;try{u.value=!0,a.value={};const p=await i.post("/api/suppliers",t);return a.value={},{success:!0,data:p.data}}catch(p){return((s=p.response)==null?void 0:s.status)===422?a.value=p.response.data.errors||{}:a.value={general:[((e=(r=p.response)==null?void 0:r.data)==null?void 0:e.message)||p.message||"Failed to create supplier"]},{success:!1,error:a.value}}finally{u.value=!1}},updateSupplier:async(t,s)=>{var r,e,p,c;try{u.value=!0,a.value={};const n=await i.put(`/api/suppliers/${t}`,s),d=(r=l.value.data)==null?void 0:r.findIndex(y=>y.id===t);return d!==-1&&l.value.data&&(l.value.data[d]=n.data.data),n.data}catch(n){return n instanceof g&&((e=n.response)==null?void 0:e.status)===422?a.value=n.response.data.errors:a.value={general:[((c=(p=n.response)==null?void 0:p.data)==null?void 0:c.message)||"Failed to update supplier"]},null}finally{u.value=!1}},deleteSupplier:async t=>{var s,r;try{return u.value=!0,a.value=null,await i.delete(`/api/suppliers/${t}`),l.value.data=l.value.data.filter(e=>e.id!=t),l.value.total-=1,l.value.to-=1,!0}catch(e){throw a.value=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to delete supplier",e}finally{u.value=!1}}}});export{B as u};
