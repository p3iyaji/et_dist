import{_ as f}from"./AppLayout-vBxF1_vo.js";import{u as O}from"./orderStores-CrhXQYw-.js";import{r as _,o as k,x as b,z as F,c as x,w,s as C,e as d,f as t,g as a,h as n,j as r,t as s,k as D,F as P,i as B}from"./index-DN1la__8.js";import I from"./ThermalInvoice-CDnWyuPJ.js";import"./settingsStore-B-d95HMW.js";const S={class:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5"},T={key:0,class:"mx-auto max-w-screen-xl px-4 lg:px-12"},L={class:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden"},N={class:"flex justify-between items-center p-4"},R={class:"text-lg font-semibold"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border-b text-gray-700"},V={class:"mt-1"},j={key:0},z={key:1},E={class:"mt-1"},q={class:"capitalize"},A={class:"overflow-x-auto"},M={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},Q={class:"px-4 py-3"},G={class:"px-4 py-3"},H={class:"px-4 py-3"},J={class:"px-4 py-3"},K={class:"p-4 border-t"},U={class:"grid grid-cols-2 gap-4 max-w-md ml-auto"},W={class:"text-right"},X={key:0,class:"text-right text-red-500"},Y={key:1,class:"text-right text-red-500"},Z={key:2,class:"text-right text-red-500"},tt={key:3,class:"text-right text-red-500"},et={class:"text-right font-bold"},rt={class:"text-right"},st={key:4,class:"text-right"},ot={key:5,class:"text-right"},dt={key:1,class:"text-center py-8"},at={key:2,class:"text-center py-8 text-red-500"},xt={__name:"OrderDetails",setup(nt){const g=F(),h=C(),e=O(),c=_(!1),m=_(null);k(()=>{b(),e.fetchOrderById(g.params.id)});const y=()=>{c.value=!0},v=()=>{h.go(-1)};return(it,o)=>(d(),x(f,null,{default:w(()=>{var l,u,p;return[t("section",S,[r(e).currentOrder?(d(),a("div",T,[t("div",L,[t("div",N,[t("h2",R,"Order #"+s(r(e).currentOrder.order_no),1),t("div",null,[t("button",{onClick:v,class:"w-32 bg-teal-500 text-white px-4 m-2 py-2 rounded-lg hover:bg-teal-700 transition"}," Back "),t("button",{onClick:y,class:"w-32 bg-teal-800 text-white px-4 m-2 py-2 rounded-lg hover:bg-teal-700 transition"}," Print Now ")])]),t("div",$,[t("div",null,[o[1]||(o[1]=t("h3",{class:"font-medium dark:text-gray-300"},"Customer Information",-1)),t("p",V,s((l=r(e).currentOrder.customer)==null?void 0:l.name),1),(u=r(e).currentOrder.customer)!=null&&u.phone?(d(),a("p",j,"Phone: "+s(r(e).currentOrder.customer.phone),1)):n("",!0),(p=r(e).currentOrder.customer)!=null&&p.email?(d(),a("p",z,"Email: "+s(r(e).currentOrder.customer.email),1)):n("",!0)]),t("div",null,[o[3]||(o[3]=t("h3",{class:"font-medium text-gray-700 dark:text-gray-300"},"Order Information",-1)),t("p",E,[o[2]||(o[2]=D("Status: ")),t("span",q,s(r(e).currentOrder.status),1)]),t("p",null,"Date: "+s(new Date(r(e).currentOrder.date).toLocaleString()),1),t("p",null,"Cashier: "+s(r(e).currentOrder.user),1)])]),t("div",A,[t("table",M,[o[4]||(o[4]=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[t("tr",null,[t("th",{scope:"col",class:"px-4 py-3"},"Product"),t("th",{scope:"col",class:"px-4 py-3"},"Price"),t("th",{scope:"col",class:"px-4 py-3"},"Qty"),t("th",{scope:"col",class:"px-4 py-3"},"Total")])],-1)),t("tbody",null,[(d(!0),a(P,null,B(r(e).currentOrder.items,i=>(d(),a("tr",{key:i.id,class:"border-b dark:border-gray-700"},[t("td",Q,s(i.name||`Product ${i.product_id}`),1),t("td",G,"₦"+s(parseFloat(i.unit_price).toFixed(2)),1),t("td",H,s(i.quantity),1),t("td",J,"₦"+s(parseFloat(i.total).toFixed(2)),1)]))),128))])])]),t("div",K,[t("div",U,[o[5]||(o[5]=t("div",{class:"text-right"},"Subtotal:",-1)),t("div",W,"₦"+s(parseFloat(r(e).currentOrder.subtotal).toFixed(2)),1),r(e).currentOrder.product_discounts>0?(d(),a("div",X," Product Discounts:")):n("",!0),r(e).currentOrder.product_discounts>0?(d(),a("div",Y," -₦"+s(parseFloat(r(e).currentOrder.product_discounts).toFixed(2)),1)):n("",!0),r(e).currentOrder.general_discount>0?(d(),a("div",Z," Order Discount:")):n("",!0),r(e).currentOrder.general_discount>0?(d(),a("div",tt," -₦"+s(parseFloat(r(e).currentOrder.general_discount).toFixed(2)),1)):n("",!0),o[6]||(o[6]=t("div",{class:"text-right font-bold"},"Total:",-1)),t("div",et,"₦"+s(parseFloat(r(e).currentOrder.total).toFixed(2)),1),o[7]||(o[7]=t("div",{class:"text-right"},"Amount Tendered:",-1)),t("div",rt,"₦"+s(parseFloat(r(e).currentOrder.amount_tendered).toFixed(2)),1),r(e).currentOrder.change_due>0?(d(),a("div",st,"Change Due:")):n("",!0),r(e).currentOrder.change_due>0?(d(),a("div",ot,"₦"+s(parseFloat(r(e).currentOrder.change_due).toFixed(2)),1)):n("",!0)])])])])):r(e).isLoading?(d(),a("div",dt," Loading order details... ")):(d(),a("div",at," Failed to load order details ")),c.value&&r(e).currentOrder?(d(),x(I,{key:3,order:r(e).currentOrder,ref_key:"thermalInvoiceRef",ref:m,onClose:o[0]||(o[0]=i=>c.value=!1)},null,8,["order"])):n("",!0)])]}),_:1}))}};export{xt as default};
