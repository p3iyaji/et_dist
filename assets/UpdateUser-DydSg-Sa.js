import{r as h,o as _,y as U,c as M,w as C,q as B,e as l,f as e,l as S,m as d,g as i,h as u,v as x,j as s,t as m,A as V,n as b,z as A,k as E}from"./index-BLk6GGVK.js";import{_ as z}from"./AppLayout-CHbZXINC.js";import{u as N}from"./userStore-Dtlh0yEB.js";import{S as k}from"./sweetalert2.esm.all-BQIkj5Wb.js";const j={class:"max-w-4xl mx-auto"},L={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden"},R={class:"p-6"},D={class:"space-y-6"},I={key:0,class:"mt-1 text-sm text-red-600"},T={key:0,class:"mt-1 text-sm text-red-600"},q={class:"flex items-center"},H={key:0,class:"mt-1 text-sm text-red-600"},$={class:"flex justify-end pt-4"},F=["disabled"],G={key:0},J={key:1,class:"flex items-center"},X={__name:"UpdateUser",setup(K){const t=N(),c=B(),g=U(),a=h({name:"",email:"",password:"",role:"",is_active:!0});_(async()=>{await t.fetchUsers();const n=g.params.id,r=await t.fetchUserById(n);console.log(r),r&&(a.value={name:r.user.name,email:r.user.email,role:r.user.role,is_active:r.user.is_active})});const v=async()=>{t.errorMessage={},await t.updateUser(g.params.id,a.value)?(k.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,title:"User updated successfully!"}),c.push("/users")):t.errorMessage.general&&k.fire({icon:"error",title:"Error",text:t.errorMessage.general[0]})},w=()=>{c.go(-1)};return(n,r)=>(l(),M(z,null,{default:C(()=>{var p,f,y;return[e("div",j,[e("div",L,[e("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[e("div",{class:"flex justify-between items-center"},[r[4]||(r[4]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Update User ",-1)),e("button",{onClick:w,type:"button",class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"}," Back ")])]),e("div",R,[e("form",{onSubmit:S(v,["prevent"])},[e("div",D,[e("div",null,[r[5]||(r[5]=e("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," User Name ",-1)),d(e("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>a.value.name=o),type:"text",id:"name",class:"bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Enter user name"},null,512),[[x,a.value.name]]),(p=s(t).errorMessage)!=null&&p.name?(l(),i("p",I,m(s(t).errorMessage.name[0]),1)):u("",!0)]),e("div",null,[r[6]||(r[6]=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," User Email ",-1)),d(e("input",{"onUpdate:modelValue":r[1]||(r[1]=o=>a.value.email=o),type:"text",id:"email",class:"bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Enter user email"},null,512),[[x,a.value.email]]),(f=s(t).errorMessage)!=null&&f.email?(l(),i("p",T,m(s(t).errorMessage.email[0]),1)):u("",!0)]),e("div",q,[d(e("input",{"onUpdate:modelValue":r[2]||(r[2]=o=>a.value.is_active=o),type:"checkbox",id:"is_active",class:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500 dark:focus:ring-teal-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[V,a.value.is_active]]),r[7]||(r[7]=e("label",{for:"is_active",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Active ",-1))]),e("div",null,[r[9]||(r[9]=e("label",{for:"role",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," User Role ",-1)),d(e("select",{"onUpdate:modelValue":r[3]||(r[3]=o=>a.value.role=o),id:"role",class:b([{"border-red-500":s(t).errorMessage.role,"border-gray-300":!s(t).errorMessage.role},"bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"])},r[8]||(r[8]=[e("option",{value:"",disabled:"",selected:""},"Select a role",-1),e("option",{value:"Admin"},"Admin",-1),e("option",{value:"Manager"},"Manager",-1),e("option",{value:"Cashier"},"Cashier",-1)]),2),[[A,a.value.role]]),(y=s(t).errorMessage)!=null&&y.role?(l(),i("p",H,m(s(t).errorMessage.role[0]),1)):u("",!0)]),e("div",$,[e("button",{type:"submit",disabled:s(t).isLoading,class:b(["px-6 py-3 bg-teal-600 hover:bg-teal-700 text-white font-medium rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200",{"opacity-50 cursor-not-allowed":s(t).isLoading}])},[s(t).isLoading?(l(),i("span",J,r[10]||(r[10]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),E(" Updating... ")]))):(l(),i("span",G,"Update User"))],10,F)])])],32)])])])]}),_:1}))}};export{X as default};
